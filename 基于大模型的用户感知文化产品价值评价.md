[Toc]



# 基于大模型的用户感知文化产品评价测试



## 数据准备

采集了豆瓣平台上21部电视剧的各类型评论文本数据，其中长评16235条，短评7969条，小组讨论帖子5452个（回帖总数138366条）。

去重后，使用大模型对评论进行清洗，以下是提示词：

```
我将提供一条用户的电视剧评论，请你判断其中是否包含与电视剧本身相关的评价信息，不论是本身的质量还是宣传，以及受众观看剧集是产生的感悟，都是对剧的评价。

请清洗掉以下内容：
- 与电视剧无关的聊天、广告、吐槽或无意义内容
- 无具体信息的感叹（如“哈哈哈哈哈”、“看了好几遍了”、“真的无语”）
- 对剧情细节的描述和引用，与评价无关
- 与其他作品、事件或话题无关联的比较
- 重复、冗余、空泛的文字

你的任务是：
1. 如果评论中包含有效的剧评内容，提取并保留这些部分。
2. 如果评论中完全没有剧评相关内容，请返回空字符串。
3. 不要过度发挥。

返回格式
以Json格式返回清洗后评论内容，请不要返回其他任何内容。具体格式为：
{jsonf}

请处理以下评论文本：
“{comment}”
```

小组讨论以最多50条回复为一组进行请求，最终去掉返回为空字符串（不含有评价相关信息的评论），获得三种清洗后评论量：

| 电视剧名称             | group |  long | short |   All |
| :--------------------- | ----: | ----: | ----: | ----: |
| 180天重启计划          |   224 |   178 |   273 |   675 |
| 三叉戟2                |   228 |    72 |   314 |   614 |
| 人生若如初见           |   340 |   464 |   299 |  1103 |
| 仙台有数               |   331 |  1673 |   303 |  2307 |
| 余烬之上               |   259 |   149 |   284 |   692 |
| 北上                   |   230 |   563 |   306 |  1099 |
| 千朵桃花一世开         |   348 |   184 |   297 |   829 |
| 国色芳华               |   298 |  2287 |   300 |  2885 |
| 异人之下之决战！碧游村 |   314 |   223 |   291 |   828 |
| 护宝寻踪               |   221 |    97 |   286 |   604 |
| 无忧渡                 |   430 |  1167 |   296 |  1893 |
| 无所畏惧之永不放弃     |   245 |    83 |   289 |   617 |
| 树下有片红房子         |   159 |   315 |   268 |   742 |
| 棋士                   |   303 |   433 |   305 |  1041 |
| 沙尘暴                 |   261 |   418 |   281 |   960 |
| 滤镜                   |   311 |  1960 |   295 |  2566 |
| 致1999年的自己         |   258 |    89 |   266 |   613 |
| 藏海传                 |   354 |  5077 |   317 |  5748 |
| 锦囊妙录               |   251 |   142 |   286 |   679 |
| 鹊刀门传奇 第二季      |   215 |    49 |   267 |   531 |
| 黄雀                   |   215 |   144 |   274 |   633 |
| 无尽的尽头             |   185 |   250 |   271 |   706 |
| All                    |  5980 | 16017 |  6368 | 28365 |



## 数据驱动的用户评价主题识别（LDA）

从清洗后评论出发，通过数学模型挖掘用户评价中的潜在主题，即解决“用户评论时都在讨论什么？”



### LDA（Latent Dirichlet Allocation）主题模型

LDA（Latent Dirichlet Allocation）是一种常用的**无监督机器学习算法**，用于从大规模文本中发现**潜在的主题结构**。

LDA 假设每篇文档（这里相当于是评论）由多个“主题”构成的，每个主题又是由一组“词语”构成的。整个生成过程如下：

1. 每篇文档在所有主题中采样一个主题分布；
2. 对于每个单词，从该文档的主题分布中选择一个主题；
3. 再从这个主题的词分布中选择一个词。

**简单来说，LDA试图“反推出”隐藏在文档背后的主题组合和词汇偏好。**

在用户评论数据的场景中，我们期望通过运行LDA，可能会发现如下主题：

- 主题 A：演员、演技、表演、角色…
- 主题 B：剧情、反转、结局、悬念…
- 主题 C：视觉、摄影、画面、灯光…

每条影评就可以用这些主题按不同权重来表示，从而理解文本背后的语义结构。



### LDA技术实现

输入是逐条评论数据

1. jieba分词，去掉停用词
2. 标注词性，去掉不具有实际评价意义的词性
3. 去掉候选词过少的评论（少于5个词汇）
4. 大部分电视剧最终评论数在500以上，最多的可以达到5516（《藏海传》），为了避免因声量过大影响主题识别结果，采用平衡采样，超过500的电视剧随机抽取500条参与建模。
5. 训练LDA模型，主题数从5递增到20，观察困惑度和一致性分数

![](img/LDA模型.png)

综合困惑度和一致性，最终选择主题数16，根据主题中的高频词语，确定主题含义如下：

| 主题编号 | 关键词（含权重）                                             | 主题标签           | 判断依据                                                     |
| -------- | ------------------------------------------------------------ | ------------------ | ------------------------------------------------------------ |
| **0**    | 女主(0.27), 男主(0.22), 男女(0.06), 视角(0.02), 感情(0.02), 误会(0.02), 恋爱(0.02), 洗白(0.01), 营销(0.01), 工具(0.01) | **男女主**         | 关键词集中在“男女主+感情+视角”，涉及“误会”“洗白”等恋爱套路   |
| **1**    | 演员(0.12), 演技(0.11), 角色(0.11), 台词(0.05), 表演(0.03), 情绪(0.02), 眼神(0.02), 表情(0.02), 表现(0.02), 演得(0.02) | **演技与台词**     | 典型的“演技评价型评论”，关注演员表现、台词、细节             |
| **2**    | 喜欢(0.10), 编剧(0.06), 剧里(0.03), 结局(0.03), 导演(0.02), 希望(0.02), 地方(0.02), 戏份(0.02), 起来(0.02), 明显(0.02) | **编剧**           | 出现“编剧”“剧里”“结局”等词，体现观众对编剧的满意度           |
| **3**    | 滤镜(0.31), 喜剧(0.14), 偶像剧(0.05), 好笑(0.05), 小品(0.03), 成人(0.03), 对准(0.03), 精美(0.02), 下饭(0.02), 熟人(0.02) | **喜剧题材**       | “喜剧”“偶像剧”“好笑”“小品”                                   |
| **4**    | 新颖(0.12), 衣服(0.09), 为主(0.07), 痕迹(0.06), 友好(0.05), 老套(0.04), 幼稚(0.03), 喜剧效果(0.02), 不小(0.02), 段子(0.02) | **新颖或老套**     | 对剧情是否“新颖”或“老套”的判断                               |
| **5**    | 孩子(0.02), 理解(0.01), 生活(0.01), 现实(0.01), 需要(0.01), 家庭(0.01), 父母(0.01), 保护(0.01), 工作(0.01), 事情(0.01) | **家庭责任**       | 出现“孩子”“父母”“生活”等低频但聚焦词，表达对现实家庭关系的关注 |
| **6**    | 家属(0.06), 三观(0.06), 评分(0.04), 服装(0.04), 出身(0.04), 封神(0.02), 姐弟(0.02), 游戏(0.02), 高中生(0.02), 少见(0.02) | **价值观**         | “三观”“出身”“评分”等体现社会评价视角                         |
| **7**    | 社会(0.07), 女性(0.06), 叙事(0.02), 现实(0.02), 时代(0.02), 家庭(0.02), 剧中(0.01), 成为(0.01), 保护(0.01), 意义(0.01) | **女性视角**       | “社会+女性+现实”组合突出性别议题，强调现实主义表达           |
| **8**    | 观众(0.05), 剧中(0.03), 角色(0.03), 人物(0.02), 展现(0.02), 情感(0.02), 成长(0.02), 塑造(0.02), 刻画(0.01), 感受(0.01) | **角色塑造与成长** | 聚焦“人物成长”“情感刻画”“观众感受”                           |
| **9**    | 选择(0.03), 世界(0.02), 复仇(0.02), 人性(0.02), 善良(0.01), 身份(0.01), 行为(0.01), 成为(0.01), 内心(0.01), 悲剧(0.01) | **人性**           | 出现“复仇”“人性”“悲剧”“选择”等深层主题词                     |
| **10**   | 口音(0.07), 热度(0.06), 难看(0.05), 国家(0.05), 行业(0.05), 平台(0.04), 流量(0.04), 抄袭(0.03), 垃圾(0.03), 转移(0.03) | **热度与辣评**     | “热度”“流量”“抄袭”“垃圾”等为网络负评常见关键词               |
| **11**   | 镜头(0.05), 法律(0.05), 电视剧(0.05), 值得(0.04), 导演(0.04), 题材(0.04), 警察(0.03), 国产(0.02), 细节(0.02), 校园(0.02) | **警法题材**       | “法律”“警察”“题材”体现类型化剧集的专业评价                   |
| **12**   | 故事(0.07), 人物(0.05), 逻辑(0.04), 情节(0.04), 设定(0.03), 部分(0.02), 设计(0.02), 主角(0.02), 剧情(0.02), 背景(0.02) | **故事与情节设定** | “故事”“设定”“逻辑”“背景”属于结构性内容评价                   |
| **13**   | 剧情(0.18), 好看(0.06), 不错(0.04), 节奏(0.03), 主角(0.02), 搞笑(0.02), 配角(0.02), 吸引(0.02), 可爱(0.02), 精彩(0.02) | **剧情吸引力**     | 综合“剧情吸引力”“节奏感”“可看性”等方面                       |
| **14**   | 女子(0.06), 国色(0.05), 芳华(0.05), 音乐(0.05), 家族(0.04), 恐怖(0.04), 布景(0.04), 服饰(0.03), 宝宝(0.03), 大陆(0.03) | **古风与艺术**     | “音乐“”布景”构成古风/氛围剧审美取向                          |
| **15**   | 女生(0.09), 美学(0.07), 评论(0.06), 标题(0.04), 接触(0.04), 俗套(0.03), 傻子(0.03), 资本(0.03), 美丽(0.03), 拍出(0.03) | **美学**           | “女生”“美学”“拍出”“评论”等多为观众主观评价与视觉倾向         |

![](img/主题-词语分布.png)



### LDA结果展示

我们针对每一条评论，计算其属于哪个主题以及程度，只保留较高的（大于0.05），进行归一化，作为该评论实际主题。

对于一个主题，如果某评论中有0.3的概率体现出该主题，则记该主题出现0.3次，以这种方式统计全部评论中主题的分布。

![](img/主题加权分布.png)

对于每个电视剧的每一条评论，我们获得一个全主题的概率分布，计算该电视剧全部评论的主题分布均值，作为该电视剧的主题分布。

考虑到评论的主题倾向性，有一些主题可能在每个电视剧中都有相当的数量，会导致最终分布普遍性地偏向于该主题，因此采用区位熵的方式进行处理，即汇总全部电视剧的主题分布，得到一个全体的平均分布，然后每个电视剧的主题分布除以这个平均分布，以相对平均水平多少来表示该电视剧在主题上的突出情况。

![](img/电视剧-主题分布（区位熵）.png)



## 基于大模型的用户多维度评价提取

我们也可以人为设定评价维度，依靠大模型的语义理解，总结归纳和结构化输出能力，按照规则从评论中提取评价信息。



### 评价指标与描述设定

| 一级     | 二级       | 说明                                                     |
| :------- | :--------- | :------------------------------------------------------- |
| 思想精深 | 主题立意   | 主题是否深刻，是否具有现实意义或历史启发                 |
| 思想精深 | 价值导向   | 是否传达积极向上、主流价值或者正能量                     |
| 思想精深 | 社会反思   | 是否贴近现实，聚焦社会问题，引发现实共鸣                 |
| 思想精深 | 思想深度   | 是否具备多层次的思想解读空间，发人深省                   |
| 艺术精湛 | 剧情结构   | 剧情是否节奏合理、逻辑清晰，能够很好地埋设伏笔和回收线索 |
| 艺术精湛 | 人物塑造   | 角色是否立体饱满、有层次、有成长性                       |
| 艺术精湛 | 语言表达   | 对白、旁白、字母等语言是否贴合情景，生动而富有感染力     |
| 艺术精湛 | 表演质量   | 演员的表演是否自然、符合人物，有演技、有张力             |
| 艺术精湛 | 镜头语言   | 镜头语言是否具有美感与艺术性                             |
| 艺术精湛 | 音乐音效   | 音乐与音效是否增强情感氛围与叙事效果                     |
| 制作精良 | 场景设置   | 实景/置景是否符合剧情和质感                              |
| 制作精良 | 服道化     | 服装、化妆、道具的专业性和契合度                         |
| 制作精良 | 剪辑节奏   | 剪辑是否流畅，是否有助于广安和情绪表达                   |
| 制作精良 | 特效技术   | 特效是否逼真、符合整体风格                               |
| 制作精良 | 后期质量   | 其余后期制作是否专业，包括调色、混音、配音等             |
| 整体评价 | 无具体指向 | 无法判断是对上述哪个维度进行评价，接近于整体的喜好判断   |

补充了一个整体评价用来提取没有明确指向的好/差评。



### 大模型请求实现

提示词如下：

```
我将给你一段关于电视剧《{drama}》的网友评论，请根据**电视剧评价指标**，提取评论中符合指标说明的评价要点信息，并判断是正向还是负向。
最终严格按照下面示例的结构返回JSON对象，其中<>内文字是解释说明，如果一则评论能够提取多个指标，则放在一个列表中。如果该评论无法提取任何指标，返回空字符串。
{jsonf}

# 字段解释
- id：提取时生成序号，从1开始递增。
- 一级：思想精深、艺术精湛、制作精良、整体评价，只能从这四个中选择标注。
- 二级：根据所标注的一级，从**电视剧评价指标**中寻找对应的二级，只能从给出的二级中选择。
- 正负向：评论所表现的情感倾向，正向为褒奖、负向为批评，只能返回正向或者负向。
- 评论内容：照抄做出上述判断的评论原文，去掉无关的部分。

# 注意事项
1. 请尽可能提取评论中涉及的所有评价指标，如果评论过长，可以逐句、逐段判断，最终返回汇总的结果。
2. 同一句话如果涉及多个指标，请提取最重要、最核心的那个指标，除非他们都很重要。
3. 同一个评论如果对于同一个指标，有多次评价，每一次都要提取，并保证所依据的评论原文是不同的。
4. 注意区别评论是对于剧情的讨论，还是对电视剧本身质量的评论。
5. 注意，必须严格遵守**电视剧评价指标**中的指标体系来进行提取和标注。必须严格按照规定返回一级、二级以及正负向，不能返回其他内容。

# 评论内容
{text}
# 电视剧评价指标
{indexf}
```

提取返回json格式，经过处理如下：

![](img/提取结果样例.png)

![](img/评价维度提取数量.png)

能够发现绝大部分评论都能提取出至少一条评价信息，说明我们的清洗有效果。

单条评论能够提取多少评价信息，不同电视剧差异较大。



### 提取评价信息展示

首先来看评价量（声量），即每个电视剧哪个评价维度被提及较多。

![](img/各电视剧不同维度的讨论热度分布.png)

能明显发现讨论的维度具有集中性，剧情和人物是观众最关注的点，围绕他们评价最多。思想精深比制作方面评价要多一些。整体评价也比较多。

我们同样可以计算区位熵，来获得每个电视剧的评价分布相对于整体平均评价分布的多少。

![](img/各电视剧不同维度的讨论热度区位熵.png)

接下来，针对每个维度，利用正向和负向评价数构造得分，从而获得每个电视剧在各个维度上的分值。具体公示如下：
$$
得分 = \frac{正向+10}{正向+负向+20}
$$
该公式本质上是正向占比的变体，当正向和负向评论相当时，得分0.5。全正向评论得分1，全负向评论得分0。考虑到有些电视剧在某些评价维度上正负向可能数量过少，容易计算得到极端值，因此预先假定每个维度已经存在10个正向和10个负向评价，保证提取评价过少时，分值会在0.5附近。

![](img/各电视剧不同维度的得分.png)



## 附录



### 电视剧评价提取具体情况

<img src="img/无尽的尽头评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/异人之下之决战！碧游村评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/鹊刀门传奇 第二季评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/沙尘暴评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/树下有片红房子评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/家里家外评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/180天重启计划评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/今人不见古时玥评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/国色芳华评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/致1999年的自己评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/三叉戟2评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/无忧渡评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/锦囊妙录评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/棋士评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/人生若如初见评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/滤镜评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/护宝寻踪评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/余烬之上评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/藏海传评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/仙台有数评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/请君入我怀评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/北上评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/黄雀评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/千朵桃花一世开评价维度蝴蝶图.png" style="zoom: 30%;" />
<img src="img/无所畏惧之永不放弃评价维度蝴蝶图.png" style="zoom: 30%;" />



### 电视剧各维度得分雷达图

<img src="img/无尽的尽头评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/异人之下之决战！碧游村评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/鹊刀门传奇 第二季评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/沙尘暴评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/树下有片红房子评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/180天重启计划评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/国色芳华评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/致1999年的自己评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/三叉戟2评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/无忧渡评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/锦囊妙录评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/棋士评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/人生若如初见评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/滤镜评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/护宝寻踪评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/余烬之上评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/藏海传评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/仙台有数评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/北上评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/黄雀评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/千朵桃花一世开评价维度雷达图.png" style="zoom: 25%;" />
<img src="img/无所畏惧之永不放弃评价维度雷达图.png" style="zoom: 25%;" />
